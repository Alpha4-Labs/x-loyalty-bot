name = "twitter-loyalty-bot"
main = "src/index.js"
compatibility_date = "2024-11-23"
compatibility_flags = ["nodejs_compat"]

# Custom domain configuration
[[routes]]
pattern = "x-demo.loyalteez.app/*"
zone_name = "loyalteez.app"

# Service bindings for worker-to-worker communication
[[services]]
binding = "EVENT_HANDLER"
service = "loyalteez-event-handler"

# KV for tracking tweet processing to avoid duplicates
[[kv_namespaces]]
binding = "TWITTER_BOT_KV"
id = "2ccf358b408844289785f1ff3e272bf1"

# Scheduled trigger for polling (every 15 mins)
[triggers]
crons = ["*/15 * * * *"]

[vars]
# Loyalteez Brand ID (Wallet Address) - Configure in Cloudflare Dashboard
BRAND_ID = "0x_configure_in_dashboard"
# API URL
LOYALTEEZ_API_URL = "https://api.loyalteez.app"
# Twitter Handle to track - Configure in Cloudflare Dashboard
TWITTER_HANDLE = "configure_in_dashboard"

# ============================================
# SECRETS - Set via Cloudflare Dashboard or CLI
# wrangler secret put TWITTER_BEARER_TOKEN
# ============================================
