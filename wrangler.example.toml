name = "twitter-loyalty-bot"
main = "src/index.js"
compatibility_date = "2024-11-23"
compatibility_flags = ["nodejs_compat"]

# Custom domain configuration (Optional)
# [[routes]]
# pattern = "x-bot.your-domain.com/*"
# zone_name = "your-domain.com"

# Service bindings (Optional - for Loyalteez internal use)
# [[services]]
# binding = "EVENT_HANDLER"
# service = "loyalteez-event-handler"

# Key-value storage for deduplication
[[kv_namespaces]]
binding = "TWITTER_BOT_KV"
id = "your_kv_namespace_id"

# Scheduled trigger for polling
# Free tier: Use hourly ("0 * * * *") to conserve 100 posts/month limit
# Basic tier ($100/mo): Can use every 15 mins ("*/15 * * * *")
[triggers]
crons = ["0 * * * *"]  # Once per hour (top of each hour)

[vars]
# Loyalteez Brand ID (Your wallet address from Partner Portal)
BRAND_ID = "0x_your_brand_wallet_address"
# API URL
LOYALTEEZ_API_URL = "https://api.loyalteez.app"
# Supabase connection (for reading config from Partner Portal)
SUPABASE_URL = "https://xcyhefjogmgttegqhhyi.supabase.co"

# ============================================
# SECRETS - Set via `wrangler secret put ...`
# NEVER commit actual values to git!
# ============================================
# wrangler secret put TWITTER_BEARER_TOKEN
# wrangler secret put SUPABASE_PUBLISH_KEY
#
# TWITTER_BEARER_TOKEN: Get from Twitter Developer Portal
# SUPABASE_PUBLISH_KEY: Get from Loyalteez team (browser-safe key for RLS)
